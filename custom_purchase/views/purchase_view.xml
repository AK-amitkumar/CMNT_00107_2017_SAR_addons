<?xml version="1.0" encoding="utf-8"?>
<odoo>
        <record id="purchase_order_form_custom" model="ir.ui.view">
            <field name="name">purchase.order.form.custom</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">
                <field name="company_id" position="after">
                    <field name="origin_po_id"/>
                    <field name="create_uid"/>
                    <field name="attn"/>
                    <field name="origin_sale_id"/>
                    <field name="origin_model_id"/>
                    <field name="lines_sale_id"/>
                    <field name="lines_model_id"/>
                </field>

                <xpath expr="//field[@name='order_line']" position="attributes">
                       <attribute name="context">{'lines_sale_id': lines_sale_id,'lines_model_id': lines_model_id}</attribute>
                </xpath>

                <xpath expr="//field[@name='order_line']/tree/field[@name='discount']" position="after">
                        <field name="related_sale_id"/>
                        <field name="related_model_id"/>
                        <field name="line_note"/>
                </xpath>

                <xpath expr="//field[@name='order_line']/form/sheet/group[1]" position="after">
                    <group>
                        <field name="line_note"/>
                    </group>
                </xpath>

                <notebook position="inside">
                    <page string="Grouped Lines">
                        <field name="grouped_line_ids">
                            <tree>
                                <field name="template_id"/>
                                <field name="sale_id"/>
                                <field name="model_id"/>
                                <field name="ref_prov"/>
                                <field name="color_id"/>
                                <field name="width"/>
                                <field name="grammage"/>
                                <field name="gauge"/>
                                <field name="thread"/>
                                <field name="qty"/>
                                <field name="uom_id"/>
                                <field name="price"/>
                            </tree>
                             <form>
                                <group>
                                    <group>
                                        <field name="template_id"/>
                                        <field name="sale_id"/>
                                        <field name="model_id"/>
                                        <field name="ref_prov"/>
                                        <field name="color_id"/>
                                        <field name="qty"/>
                                        <field name="uom_id"/>
                                        <field name="price"/>
                                    </group>
                                    <group>
                                        <field name="width"/>
                                        <field name="grammage"/>
                                        <field name="gauge"/>
                                        <field name="thread"/>
                                    </group>
                                 </group>
                                 <group>
                                    <field name="att_detail" class="att_detail"/>
                                 </group>
                                  <group>
                                    <field name="sales_str"/>
                                    <field name="note"/>
                                 </group>
                            </form>
                        </field>
                    </page>
                </notebook>
            </field>
        </record>

</odoo>
